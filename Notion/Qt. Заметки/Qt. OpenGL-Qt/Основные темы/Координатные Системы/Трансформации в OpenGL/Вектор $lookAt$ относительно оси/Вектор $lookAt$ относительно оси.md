---


---
---

Данная заметка - это перевод [вот этой](http://www.songho.ca/opengl/gl_lookattoaxes.html) статьи

---

Данная статья описывает построение Матрицы Вращения для ==Объектного== `lookAt()` , а не для камеры.

Матрица Поворота может быть построена по средствам вектора $lookAt$﻿, при помощи 2 или 3 точек в 3-х мерном пространстве. Если объект в точке $P_{1}$﻿ развернут лицом к точке $P_{2}$﻿, тогда вектор $lookAt$﻿ - это разность $P_{2} - P_{1}$﻿.

![[lookat_vector.svg]]

Во-первых осевой вектор $\textcolor{\#0000FF}{вперед}$﻿ - крайне просто, лишь нормализовав (нормализация - есть нахождение единичного вектора) вектор $\textcolor{#B6B6B6}{lookAt}$﻿.

Во-вторых осевой вектор $\textcolor{#FF0000}{лево}$﻿ - высчитывается посредствам векторного произведения заданного направления $\textcolor{#FF3399}{вверх}$﻿ и $\textcolor{#0000FF}{вперед}$﻿. Направления $\textcolor{#FF3399}{вверх}$﻿ дано для определения угла наклона объекта и оно не обязательно должно быть перпендикулярным к осевому вектору $\textcolor{#0000FF}{вперед}$﻿. Если вдруг вектор $\textcolor{#FF3399}{вверх}$﻿ не задан, то мы можем использовать $(\textcolor{#0000FF}{0}, \textcolor{#01FF00}{1}, \textcolor{#FF0000}{0})$﻿ по дефолту, вместо него (это будет значит, что объект расположен строго вертикально).

Реальный (не заданный пользователем) осевой вектор $\textcolor{#01FF00}{вверх}$﻿, который ортогонален и вектору $\textcolor{#0000FF}{вперед}$﻿ и вектору $\textcolor{#FF0000}{лево}$﻿, как раз-таки и высчитывается при помощи векторного умножения этих векторов. И $\textcolor{#0000FF}{вперед}$﻿ и $\textcolor{#FF0000}{лево}$﻿ должны быть нормализованы после векторного произведения, что бы иметь единичные длины.

После того, как все векторы посчитаны, мы можем собрать матрицу поворота $4\times4$﻿

$$
\begin{pmatrix} \textcolor{#FF0000}{лево.x} && \textcolor{#01FF00}{верх.}\textcolor{#FF0000}{x} && \textcolor{#0000FF}{вперед.}\textcolor{#FF0000}{x} && 0 \\ \textcolor{#FF0000}{лево.}\textcolor{#01FF00}{y} && \textcolor{#01FF00}{верх.y} && \textcolor{#0000FF}{вперед.}\textcolor{#01FF00}{y} && 0 \\ \textcolor{#FF0000}{лево.}\textcolor{#0000FF}{z} && \textcolor{#01FF00}{верх.}\textcolor{#0000FF}{z} && \textcolor{#0000FF}{вперед.z} && 0 \\ 0 && 0 && 0 && 1 \end{pmatrix}
$$
